import{i as e,a as t,d as o,c as n,w as s,b as a,o as r,e as i,s as c,f as l,g as p,h as d,j as u}from"../vendor.69e0273a.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const m={},_=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`/uni/${e}`)in m)return;m[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${o}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),t?new Promise(((e,t)=>{n.addEventListener("load",e),n.addEventListener("error",t)})):void 0}))).then((()=>e())):e()},h={loading:"AsyncLoading",error:"AsyncError",delay:200,timeout:6e4,suspensible:!0};window.uni={},window.wx={};const g=Object.assign;window.____13E3000____=!0,delete window.____13E3000____,window.__uniConfig=g({globalStyle:{backgroundColor:"#F8F8F8",background:"#efeff4",navigationBar:{backgroundColor:"#F8F8F8",titleText:"uni-app",titleColor:"#000000"}},tabBar:{position:"bottom",color:"#C0C4CC",selectedColor:"#fa436a",borderStyle:"black",blurEffect:"none",fontSize:"10px",iconWidth:"24px",spacing:"3px",height:"50px",backgroundColor:"#ffffff",list:[{pagePath:"pages/index/index",text:"首页"},{pagePath:"pages/components/Orders",text:"订单"},{pagePath:"pages/components/Person",text:"我的"}],selectedIndex:0,shown:!0},compilerVersion:"3.2.6"},{async:h,debug:!1,networkTimeout:{request:6e4,connectSocket:6e4,uploadFile:6e4,downloadFile:6e4},sdkConfigs:{maps:{qqmap:{key:"G4MBZ-IGILU-4IDVJ-2BHBM-BWBHJ-3XFWT"}}},qqMapKey:"G4MBZ-IGILU-4IDVJ-2BHBM-BWBHJ-3XFWT",nvue:{"flex-direction":"column"},locale:"",router:{mode:"hash",base:"/uni/"}}),window.__uniLayout=window.__uniLayout||{};const f={loadingComponent:e,errorComponent:t,delay:h.delay,timeout:h.timeout,suspensible:h.suspensible},b=()=>_((()=>import("./pages-index-index.73301a8c.js")),["assets/pages-index-index.73301a8c.js","assets/Shop.vue_vue&type=style&index=0&scoped=true&lang.65701e99.css","vendor.69e0273a.js","uni-pagination.2bc00792.js","assets/uni-pagination.69a91951.css","uni-app.es.3ef08382.js","assets/uni-app.es.90907a48.css","uni-card.32412ff4.js","assets/uni-card.0051c0f4.css","api.0a8de5c9.js"]),T=o(g({loader:b},f)),k=()=>_((()=>import("./pages-components-Cart.db56daf6.js")),["assets/pages-components-Cart.db56daf6.js","assets/Cart.2968bc15.css","vendor.69e0273a.js","uni-card.32412ff4.js","assets/uni-card.0051c0f4.css","uni-app.es.3ef08382.js","assets/uni-app.es.90907a48.css","uni-goods-nav.960f4e30.js","assets/uni-goods-nav.833c84b5.css","api.0a8de5c9.js"]),w=o(g({loader:k},f)),x=()=>_((()=>import("./pages-components-Person.09466b87.js")),["assets/pages-components-Person.09466b87.js","assets/Person.9f8bc951.css","vendor.69e0273a.js","uni-app.es.3ef08382.js","assets/uni-app.es.90907a48.css","Address.98715c14.js","provinceData.d60c526a.js"]),E=o(g({loader:x},f)),I=()=>_((()=>import("./pages-login-login.3ecdacdc.js")),["assets/pages-login-login.3ecdacdc.js","assets/login.c3ef60b1.css","vendor.69e0273a.js","uni-easyinput.4180e833.js","assets/uni-easyinput.0b5b5af7.css","uni-app.es.3ef08382.js","assets/uni-app.es.90907a48.css","logo.a158c888.js","assets/logo.83de95f4.css","api.0a8de5c9.js"]),B=o(g({loader:I},f)),C=()=>_((()=>import("./pages-register-register.9066187c.js")),["assets/pages-register-register.9066187c.js","assets/register.cd4e2126.css","vendor.69e0273a.js","uni-easyinput.4180e833.js","assets/uni-easyinput.0b5b5af7.css","uni-app.es.3ef08382.js","assets/uni-app.es.90907a48.css","logo.a158c888.js","assets/logo.83de95f4.css","api.0a8de5c9.js"]),y=o(g({loader:C},f)),v=()=>_((()=>import("./pages-components-Shop.106d6c16.js")),["assets/pages-components-Shop.106d6c16.js","assets/Shop.vue_vue&type=style&index=0&scoped=true&lang.65701e99.css","vendor.69e0273a.js","uni-card.32412ff4.js","assets/uni-card.0051c0f4.css","uni-app.es.3ef08382.js","assets/uni-app.es.90907a48.css"]),P=o(g({loader:v},f)),L=()=>_((()=>import("./pages-components-Food.b4977f97.js")),["assets/pages-components-Food.b4977f97.js","assets/Food.6f17c789.css","vendor.69e0273a.js","uni-app.es.3ef08382.js","assets/uni-app.es.90907a48.css","uni-card.32412ff4.js","assets/uni-card.0051c0f4.css","uni-goods-nav.960f4e30.js","assets/uni-goods-nav.833c84b5.css","api.0a8de5c9.js"]),O=o(g({loader:L},f)),R=()=>_((()=>import("./pages-components-Orders.47b676c2.js")),["assets/pages-components-Orders.47b676c2.js","assets/Orders.9737d386.css","vendor.69e0273a.js","uni-app.es.3ef08382.js","assets/uni-app.es.90907a48.css","uni-card.32412ff4.js","assets/uni-card.0051c0f4.css","uni-pagination.2bc00792.js","assets/uni-pagination.69a91951.css","api.0a8de5c9.js","Address.98715c14.js","provinceData.d60c526a.js"]),D=o(g({loader:R},f)),A=()=>_((()=>import("./pages-components-Rate.d64908f7.js")),["assets/pages-components-Rate.d64908f7.js","assets/Rate.a6580162.css","vendor.69e0273a.js","uni-app.es.3ef08382.js","assets/uni-app.es.90907a48.css","uni-easyinput.4180e833.js","assets/uni-easyinput.0b5b5af7.css","api.0a8de5c9.js"]),S=o(g({loader:A},f)),j=()=>_((()=>import("./pages-components-Show_comment.93716660.js")),["assets/pages-components-Show_comment.93716660.js","vendor.69e0273a.js","uni-card.32412ff4.js","assets/uni-card.0051c0f4.css","uni-app.es.3ef08382.js","assets/uni-app.es.90907a48.css","api.0a8de5c9.js"]),V=o(g({loader:j},f)),F=()=>_((()=>import("./pages-components-Coupons.1e0c18d3.js")),["assets/pages-components-Coupons.1e0c18d3.js","vendor.69e0273a.js","uni-card.32412ff4.js","assets/uni-card.0051c0f4.css","uni-app.es.3ef08382.js","assets/uni-app.es.90907a48.css","api.0a8de5c9.js"]),M=o(g({loader:F},f)),q=()=>_((()=>import("./pages-components-Chat.dd055c80.js")),["assets/pages-components-Chat.dd055c80.js","assets/Chat.9516fa8a.css","vendor.69e0273a.js","api.0a8de5c9.js"]),W=o(g({loader:q},f)),H=()=>_((()=>import("./pages-components-Address.4799bd00.js")),["assets/pages-components-Address.4799bd00.js","vendor.69e0273a.js","provinceData.d60c526a.js"]),J=o(g({loader:H},f));function N(e){return r(),n(a,null,{page:s((()=>[i(e,{ref:"page"},null,512)])),_:1})}window.__uniRoutes=[{path:"/",alias:"/pages/index/index",component:{setup:()=>()=>N(T)},loader:b,meta:{isQuit:!0,isEntry:!0,isTabBar:!0,tabBarIndex:0,navigationBar:{titleText:"首页",searchInput:{autoFocus:!1,align:"center",color:"#000",backgroundColor:"#fff",borderRadius:"6px",placeholder:"请输入搜索内容",placeholderColor:"#CCCCCC",disabled:!1},buttons:[{text:"",fontSrc:"/static/iconfont.ttf",fontSize:"22px"}]}}},{path:"/pages/components/Cart",component:{setup:()=>()=>N(w)},loader:k,meta:{navigationBar:{titleText:"购物车"}}},{path:"/pages/components/Person",component:{setup:()=>()=>N(E)},loader:x,meta:{isQuit:!0,isTabBar:!0,tabBarIndex:2,navigationBar:{titleText:"我的"}}},{path:"/pages/login/login",component:{setup:()=>()=>N(B)},loader:I,meta:{navigationBar:{titleText:"登录"}}},{path:"/pages/register/register",component:{setup:()=>()=>N(y)},loader:C,meta:{navigationBar:{titleText:"注册"}}},{path:"/pages/components/Shop",component:{setup:()=>()=>N(P)},loader:v,meta:{enablePullDownRefresh:!1,navigationBar:{titleText:""}}},{path:"/pages/components/Food",component:{setup:()=>()=>N(O)},loader:L,meta:{navigationBar:{titleText:"商品"}}},{path:"/pages/components/Orders",component:{setup:()=>()=>N(D)},loader:R,meta:{isQuit:!0,isTabBar:!0,tabBarIndex:1,enablePullDownRefresh:!1,navigationBar:{titleText:"订单"}}},{path:"/pages/components/Rate",component:{setup:()=>()=>N(S)},loader:A,meta:{enablePullDownRefresh:!1,navigationBar:{titleText:"评价"}}},{path:"/pages/components/Show_comment",component:{setup:()=>()=>N(V)},loader:j,meta:{enablePullDownRefresh:!1,navigationBar:{titleText:"展示评论"}}},{path:"/pages/components/Coupons",component:{setup:()=>()=>N(M)},loader:F,meta:{enablePullDownRefresh:!1,navigationBar:{titleText:"优惠券"}}},{path:"/pages/components/Chat",component:{setup:()=>()=>N(W)},loader:q,meta:{enablePullDownRefresh:!1,navigationBar:{titleText:"聊天"}}},{path:"/pages/components/Address",component:{setup:()=>()=>N(J)},loader:H,meta:{enablePullDownRefresh:!1,navigationBar:{titleText:""}}}].map((e=>(e.meta.route=(e.alias||e.path).substr(1),e)));const G={onLaunch:function(){console.warn("当前组件仅支持 uni_modules 目录结构 ，请升级 HBuilderX 到 3.1.0 版本以上！"),console.log("App Launch")},onShow:function(){},onHide:function(){}};c(G);var U=l({state:()=>({user:null,count:0,username:"",orders:[],cart:[],address:"39.916527, 116.397128",coupons:[]}),mutations:{setUser(e,t){e.user=t},setAddress(e,t){e.address=t},increment(e){e.count++},setUsername(e,t){e.username=t},add_order(e,t){let o=t;o.status=0,o.comment=0,e.orders.push(o)},set_orders(e,t){e.orders=t},pay_order(e,t){e.orders[t].status=1},comment_order(e,t){e.orders[t].comment=1},add_cart(e,t){e.cart.push(t)},delete_cart(e,t){e.cart.splice(t,1)},delete_all_cart(e){e.cart=[]},set_coupons(e,t){e.coupons=t}}});class Q{constructor(e,t){this.is_open_socket=!1,this.url=e,this.data=null,this.timeout=t,this.heartbeatInterval=null,this.reconnectTimeOut=null,this.messageCallback=null;try{return this.connectSocketInit()}catch(o){console.log("catch"),this.is_open_socket=!1,this.reconnect()}}connectSocketInit(){this.socketTask=p({url:this.url,success:()=>(console.log("正准备建立websocket中..."),this.socketTask)}),this.socketTask.onOpen((e=>{console.log("WebSocket连接正常！"),clearTimeout(this.reconnectTimeOut),clearTimeout(this.heartbeatInterval),this.is_open_socket=!0})),this.socketTask.onClose((()=>{console.log("已经被关闭了"),this.is_open_socket=!1,this.reconnect()}))}setOnMessage(e){messageCallback=e,this.socketTask.onMessage((e=>{messageCallback(e)}))}async send(e){return this.socketTask.send({data:JSON.stringify(e),async success(){console.log("消息发送成功")}}),e}start(){this.heartbeatInterval=setTimeout((()=>{this.data={value:"传输内容",method:"方法名称"},console.log(this.data),this.send(JSON.stringify(this.data))}),this.timeout)}reconnect(){clearInterval(this.heartbeatInterval),this.is_open_socket||(this.reconnectTimeOut=setTimeout((()=>{this.connectSocketInit()}),3e3))}}(function(){let e=new Q("ws://123.56.43.101:8800/chat",5e3);const t=u(G);return t.use(U),t.provide("websocket",e),{app:t}})().app.use(d).mount("#app");
